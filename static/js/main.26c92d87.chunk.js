(this["webpackJsonpmy-react-app"]=this["webpackJsonpmy-react-app"]||[]).push([[1],{101:function(t,n,e){"use strict";e.d(n,"d",(function(){return O})),e.d(n,"c",(function(){return h})),e.d(n,"b",(function(){return v})),e.d(n,"e",(function(){return m})),e.d(n,"a",(function(){return x})),e.d(n,"f",(function(){return w}));var r,c,u,a,o=e(102),i=e(103),s=e(433),f=e(436),d=e(432),l=e(114),b=e(79),j=e.p+"static/media/space.f6fff2b6.svg",p=e(25),O=function(){return Object(p.jsx)(g,{children:Object(p.jsx)(s.a,{size:"large"})})},h=function(t){var n=t.error;return Object(p.jsxs)(g,{children:[Object(p.jsx)(l.a,{}),Object(p.jsx)(v,{error:n})]})},v=function(t){var n=t.error;return Object(b.b)(n)?Object(p.jsx)(f.a.Text,{type:"danger",children:null===n||void 0===n?void 0:n.message}):null},m=i.a.div(r||(r=Object(o.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: ",";\n  margin-bottom: ",";\n  > * {\n    margin-top: 0 !important;\n    margin-bottom: 0 !important;\n    margin-right: ",";\n  }\n"])),(function(t){return t.between?"space-between":void 0}),(function(t){return t.marginBottom+"rem"}),(function(t){return"number"===typeof t.gap?t.gap+"rem":t.gap?"2rem":void 0})),g=i.a.div(c||(c=Object(o.a)(["\n  height: 100vh;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-image: url(",");\n"])),j),x=Object(i.a)(d.a)(u||(u=Object(o.a)(["\n  padding: 0;\n"]))),w=i.a.div(a||(a=Object(o.a)(["\n  padding: 3.2rem;\n  width: 100vw;\n  display: flex;\n  flex-direction: column;\n"])))},180:function(t,n,e){"use strict";e.d(n,"a",(function(){return j})),e.d(n,"b",(function(){return p}));var r=e(19),c=e.n(r),u=e(43),a=e(181),o=e(48),i=e(243),s=e.n(i),f=e(77),d=e(81),l=e(0),b="https://online.com",j=function(){var t=Object(o.a)(c.a.mark((function t(n){var e,r,i,d,l,j=arguments;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=j.length>1&&void 0!==j[1]?j[1]:{},r=e.data,i=e.token,e.headers,d=Object(a.a)(e,["data","token","headers"]),"GET"===(l=Object(u.a)({method:"GET",headers:{Authorization:i?"Bearer ".concat(i):"","Content-Type":r?"application/json":""}},d)).method.toUpperCase()?n+="?".concat(s.a.stringify(r)):l.body=JSON.stringify(r||{}),t.abrupt("return",window.fetch("".concat(b,"/").concat(n),l).then(function(){var t=Object(o.a)(c.a.mark((function t(n){var e;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(401!==n.status){t.next=5;break}return t.next=3,f.c();case 3:return window.location.reload(),t.abrupt("return",Promise.reject({message:"\u8bf7\u91cd\u65b0\u767b\u5f55"}));case 5:return t.next=7,n.json();case 7:if(e=t.sent,!n.ok){t.next=12;break}return t.abrupt("return",e);case 12:return t.abrupt("return",Promise.reject(e));case 13:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()));case 4:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),p=function(){var t=Object(d.b)().user;return Object(l.useCallback)((function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];var c=e[0],a=e[1];return j(c,Object(u.a)(Object(u.a)({},a),{},{token:null===t||void 0===t?void 0:t.token}))}),[null===t||void 0===t?void 0:t.token])}},185:function(t,n,e){"use strict";e.d(n,"a",(function(){return s}));var r=e(31),c=e(43),u=e(0),a=e(79),o={throwOnError:!1},i={stat:"idle",data:null,error:null},s=function(t,n){var e=Object(c.a)(Object(c.a)({},o),n),s=Object(u.useReducer)((function(t,n){return Object(c.a)(Object(c.a)({},t),n)}),Object(c.a)(Object(c.a)({},i),t)),f=Object(r.a)(s,2),d=f[0],l=f[1],b=Object(u.useState)((function(){return function(){}})),j=Object(r.a)(b,2),p=j[0],O=j[1],h=function(t){var n=Object(a.i)();return Object(u.useCallback)((function(){return n.current?t.apply(void 0,arguments):void 0}),[t,n])}(l),v=Object(u.useCallback)((function(t){return h({data:t,stat:"success",error:null})}),[h]),m=Object(u.useCallback)((function(t){return h({error:t,stat:"error",data:null})}),[h]),g=Object(u.useCallback)((function(t,n){if(!t||!t.then)throw new Error("\u8bf7\u4f20\u5165 Promise \u7c7b\u578b\u6570\u636e");return O((function(){return function(){(null===n||void 0===n?void 0:n.retry)&&g(null===n||void 0===n?void 0:n.retry(),n)}})),h({stat:"loading"}),t.then((function(t){return v(t),t})).catch((function(t){return m(t),e.throwOnError?Promise.reject(t):t}))}),[e.throwOnError,h,v,m]);return Object(c.a)({isIdle:"idle"===d.stat,isLoading:"loading"===d.stat,isError:"error"===d.stat,isSuccess:"success"===d.stat,run:g,retry:p,setData:v,setError:m},d)}},262:function(t,n,e){},263:function(t,n,e){},273:function(t,n){},429:function(t,n,e){"use strict";e.r(n);var r=e(0),c=e.n(r),u=e(27),a=e.n(u),o=(e(262),e(263),e(81)),i=e(176),s=e.n(i),f=e(101),d=e(25),l=c.a.lazy((function(){return Promise.all([e.e(0),e.e(4),e.e(5)]).then(e.bind(null,485))})),b=c.a.lazy((function(){return Promise.all([e.e(0),e.e(7)]).then(e.bind(null,487))}));var j=function(){var t=Object(o.b)().user;return Object(d.jsx)("div",{className:"App",children:Object(d.jsx)(s.a,{children:Object(d.jsx)(c.a.Suspense,{fallback:Object(d.jsx)(f.d,{}),children:t?Object(d.jsx)(l,{}):Object(d.jsx)(b,{})})})})},p=function(t){t&&t instanceof Function&&e.e(11).then(e.bind(null,480)).then((function(n){var e=n.getCLS,r=n.getFID,c=n.getFCP,u=n.getLCP,a=n.getTTFB;e(t),r(t),c(t),u(t),a(t)}))},O=e(114),h=(e(428),e(254)),v=e(437),m=function(t){var n=t.children;return Object(d.jsx)(h.a,{client:new v.a,children:Object(d.jsx)(o.a,{children:n})})};Object(O.b)((function(){return a.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsxs)(m,{children:[Object(d.jsx)(O.a,{}),Object(d.jsx)(j,{})]})}),document.getElementById("root"))})),p()},77:function(t,n,e){"use strict";e.d(n,"a",(function(){return i})),e.d(n,"b",(function(){return f})),e.d(n,"d",(function(){return d})),e.d(n,"c",(function(){return l}));var r=e(19),c=e.n(r),u=e(48),a="https://online.com",o="__auth_provider_token__",i=function(){return window.localStorage.getItem(o)},s=function(t){var n=t.user;return window.localStorage.setItem(o,n.token||""),n},f=function(t){return fetch("".concat(a,"/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(){var t=Object(u.a)(c.a.mark((function t(n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.ok){t.next=8;break}return t.t0=s,t.next=4,n.json();case 4:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 8:return t.t2=Promise,t.next=11,n.json();case 11:return t.t3=t.sent,t.abrupt("return",t.t2.reject.call(t.t2,t.t3));case 13:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}())},d=function(t){return fetch("".concat(a,"/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(){var t=Object(u.a)(c.a.mark((function t(n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.ok){t.next=8;break}return t.t0=s,t.next=4,n.json();case 4:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 8:return t.t2=Promise,t.next=11,n.json();case 11:return t.t3=t.sent,t.abrupt("return",t.t2.reject.call(t.t2,t.t3));case 13:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}())},l=function(){var t=Object(u.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",window.localStorage.removeItem(o));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},79:function(t,n,e){"use strict";e.d(n,"e",(function(){return u})),e.d(n,"b",(function(){return a})),e.d(n,"a",(function(){return o})),e.d(n,"h",(function(){return i})),e.d(n,"f",(function(){return s})),e.d(n,"g",(function(){return f})),e.d(n,"c",(function(){return d})),e.d(n,"d",(function(){return l})),e.d(n,"i",(function(){return b}));var r=e(31),c=e(0),u=function(t){return isNaN(Number(t))?0:Number(t)},a=function(t){return null===t||void 0===t?void 0:t.message},o=function(t){if(!t)return{};var n=JSON.parse(JSON.stringify(t));return Object.keys(n).forEach((function(t){(function(t){return void 0===t||null===t||""===t})(n[t])&&delete n[t]})),n},i=function(t){Object(c.useEffect)((function(){t()}),[])},s=function(t,n){var e=Object(c.useState)(t),u=Object(r.a)(e,2),a=u[0],o=u[1];return Object(c.useEffect)((function(){var e=setTimeout((function(){return o(t)}),n);return function(){return clearTimeout(e)}}),[t,n]),a},f=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],e=Object(c.useRef)(document.title).current;Object(c.useEffect)((function(){document.title=t}),[t]),Object(c.useEffect)((function(){return function(){n||(document.title=e)}}),[n,e])},d=function(){return window.location.href=window.location.origin},l=function(t,n){var e=Object.entries(t).filter((function(t){var e=Object(r.a)(t,1)[0];return n.includes(e)}));return Object.fromEntries(e)},b=function(){var t=Object(c.useRef)(!1);return Object(c.useEffect)((function(){return t.current=!0,function(){t.current=!1}})),t}},81:function(t,n,e){"use strict";e.d(n,"a",(function(){return h})),e.d(n,"b",(function(){return v}));var r=e(19),c=e.n(r),u=e(48),a=e(0),o=e.n(a),i=e(77),s=e(180),f=e(79),d=e(185),l=e(101),b=e(254),j=e(25),p=function(){var t=Object(u.a)(c.a.mark((function t(){var n,e,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null,!(e=i.a())){t.next=7;break}return t.next=5,Object(s.a)("me",{token:e});case 5:r=t.sent,n=r.user;case 7:return t.abrupt("return",n);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),O=o.a.createContext(void 0);O.displayName="AuthContext";var h=function(t){var n=t.children,e=Object(d.a)(),r=e.data,c=e.error,u=e.isLoading,a=e.isIdle,o=e.isError,s=e.run,h=e.setData,v=Object(b.b)();return Object(f.h)((function(){s(p())})),a||u?Object(j.jsx)(l.d,{}):o?Object(j.jsx)(l.c,{error:c}):Object(j.jsx)(O.Provider,{children:n,value:{user:r,login:function(t){return i.b(t).then(h)},register:function(t){return i.d(t).then(h)},logout:function(){return i.c().then((function(){h(null),v.clear()}))}}})},v=function(){var t=o.a.useContext(O);if(!t)throw new Error("useAuth\u5fc5\u987b\u5728AuthProvider\u4e2d\u4f7f\u7528");return t}}},[[429,2,3]]]);
//# sourceMappingURL=main.26c92d87.chunk.js.map